---
title: Automated installation on Raspberry Pi OS (previously called Raspbian) and on Debian / Debian based distributions:</h2>
---

<p>To make the installation as simple as possible, we have created an installation script for you. It will setup your Raspberry Pi, Computer or Laptop as a full blown Photobooth (using Apache Webserver). This means, Photobooth and all needed packages and dependencies get installed and the automatic camera mount is disabled. On a Raspberry Pi you can choose that Photobooth is started in fullscreen on startup.</p>

<p>If you encounter any issues or want more freedom to configure your Pi, Computer or Laptop, we recommend you look at the detailed installation instruction below.
<br /><br />
The installation script is intendet to work on Raspberry Pi OS based on Debian bullseye (released October 2021), but it should also work on Raspberry Pi OS based on Debian buster.
<br /><br />
<strong>Note:</strong> If you are using an older version of Rasperry Pi OS or Debian / Debian based distribution Node.js v12.22.x will be installed if needed!</p>

<code>wget https://raw.githubusercontent.com/PhotoboothProject/photobooth/dev/install-photobooth.sh
sudo bash install-photobooth.sh
</code>

<p>On a Raspberry Pi, a username is needed to install all Pi specific options. Your OS username can be passed by the <code>-u</code> flag to the installer.
<br /><br />
For the user "pi", the command to install Photobooth needs to be:</p>
<code>sudo bash install-photobooth.sh -u="pi"</code>

<p>By default Apache is used for an easy and no-hassle setup as NGINX and Lighttpd need some additional steps.
<br />
To use NGINX run <code>sudo bash install-photobooth.sh -w="nginx"</code> (additional Setup note: <a href="FAQ#cromakeying-is-saving-without-finishing-saving">Cromakeying is saving without finishing saving</a> ),
<br />
To use Lighttpd as Webserver run <code>sudo bash install-photobooth.sh -w="lighttpd"</code>.
</p>

<p>Flags can be combined: <code>sudo bash install-photobooth.sh -u="pi" -w="nginx"</code></p>

<p>To get to know all options you can simply run <code>sudo bash install-photobooth.sh -h</code>.</p>

<h2>Manually install Photobooth on Raspberry Pi OS (previously called Raspbian) and on Debian / Debian based distributions:</h2>

<p>The steps below were tested on "Raspberry Pi OS with desktop" based on Debian Buster, but should work for Debian and all Debian based distributions. Photobooth can also be used on any other PC/Laptop running a supported OS.</p>

<h3>Update your system</h3>

<code>sudo apt update
sudo apt dist-upgrade
</code>

<h3>Install a Webserver</h3>

<p>Currently NGINX, Lighttpd and Apache Webserver are supported.
<br />
For an easy and no-hassle setup you should install Apache Webserver.
<br />
NGINX has a smaller memory footprint and typically better performance, which is especially important on the Raspberry Pis, but it needs some additional steps until you're good to go. Also Lighttpd needs some additional steps.</p>

<h4>Install Apache &amp; PHP</h4>

<code>sudo apt install -y libapache2-mod-php</code>

<h4>or Install NGINX &amp; PHP</h4>

<div class="highlight"><pre lang="">sudo apt install -y nginx php-fpm
</pre></div>

<p><details><summary><b>Additional needed steps to enable PHP in NGINX</b></summary></p>

<p>Once NGINX is installed we need to enable PHP in NGINX. If you haven't made any changes to your NGINX config you can run the following commands:</p>

<code>sudo cp /etc/nginx/sites-enabled/default ~/nginx-default.bak
sudo sed -i 's/^\(\s*\)index index\.html\(.*\)/\1index index\.php index\.html\2/g' /etc/nginx/sites-available/default
sudo sed -i '/location ~ \\.php$ {/s/^\(\s*\)#/\1/g' /etc/nginx/sites-available/default
sudo sed -i '/include snippets\/fastcgi-php.conf/s/^\(\s*\)#/\1/g' /etc/nginx/sites-available/default
sudo sed -i '/fastcgi_pass unix:\/run\/php\//s/^\(\s*\)#/\1/g' /etc/nginx/sites-available/default
sudo sed -i '/.*fastcgi_pass unix:\/run\/php\//,// { /}/s/^\(\s*\)#/\1/g; }' /etc/nginx/sites-available/default
</code>

<p>If you've made changes by hand already to <code>/etc/nginx/sites-enabled/default</code> you have to do all changes by hand:</p>

<code>sudo nano /etc/nginx/sites-enabled/default</code>

<p>Find the line <code>index index.html index.htm;</code> and add <code>index.php</code> after <code>index</code> (the line now should look like this: <code>index index.php index.html index.htm;</code>).</p>

<p>Now scroll down until you find a section with the following content:</p>

<code>
# pass the PHP scripts to FastCGI server
#
# location ~ \.php$ {
</code>

<p>Edit by removing the <code>#</code> characters on the following lines:</p>
<code>
location ~ \.php$ {
    include snippets/fastcgi-php.conf;
    fastcgi_pass unix:/run/php/php7.3-fpm.sock;
}
</code>
<p>It should look like this:</p>

<code>
        location ~ \.php$ {
                include snippets/fastcgi-php.conf;
        #
        #       # With php-fpm (or other unix sockets):
                fastcgi_pass unix:/run/php/php7.3-fpm.sock;
        #       # With php-cgi (or other tcp sockets):
        #       fastcgi_pass 127.0.0.1:9000;
        }
</code>
<p>Test the config once <code>/etc/nginx/sites-enabled/default</code> was changed:</p>

<code>sudo /usr/sbin/nginx -t -c /etc/nginx/nginx.conf &>/dev/null && echo 'config test ok' || echo 'config test failed'</code>

<p>If you get the response</p>

<pre><code>
'config test ok'
</code></pre>

<p>then it is time to restart the server with:</p>

<div class="highlight"><pre lang="">sudo systemctl reload nginx
</pre></div>

<p></details></p>

<h4>or Install Lighttpd &amp; PHP</h4>

<div class="highlight"><pre lang="">sudo apt install -y lighttpd php-fpm
</pre></div>

<p><details><summary><b>Additional needed steps to enable PHP in Lighttpd</b></summary></p>

<div class="highlight"><pre lang="">sudo lighttpd-enable-mod fastcgi
sudo lighttpd-enable-mod fastcgi-php
</pre></div>

<p>Edit fastcgi-php config, keep a backup of the original file in case something went wrong:</p>

<div class="highlight"><pre lang="">sudo cp /etc/lighttpd/conf-available/15-fastcgi-php.conf /etc/lighttpd/conf-available/15-fastcgi-php.conf.bak
sudo nano /etc/lighttpd/conf-available/15-fastcgi-php.conf
</pre></div>

<p>Change the <code>15-fastcgi-php.conf</code> from</p>

<div class="highlight"><pre lang="">

<h1>-<em>- depends: fastcgi -</em>-</h1>



<h1>/usr/share/doc/lighttpd/fastcgi.txt.gz</h1>



<h1><a href='http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ConfigurationOptions#mod_fastcgi-fastcgi'>http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ConfigurationOptions#mod_fastcgi-fastcgi</a></h1>



<h2>Start an FastCGI server for php (needs the php5-cgi package)</h2>

fastcgi.server += ( ".php" => 
    ((
        "bin-path" => "/usr/bin/php-cgi",
        "socket" => "/var/run/lighttpd/php.socket",
        "max-procs" => 1,
        "bin-environment" => ( 
            "PHP_FCGI_CHILDREN" => "4",
            "PHP_FCGI_MAX_REQUESTS" => "10000"
        ),
        "bin-copy-environment" => (
            "PATH", "SHELL", "USER"
        ),
        "broken-scriptfilename" => "enable"
    ))
)
</pre></div>

<p>to look like this:</p>

<div class="highlight"><pre lang="">

<h1>-<em>- depends: fastcgi -</em>-</h1>



<h1>/usr/share/doc/lighttpd/fastcgi.txt.gz</h1>



<h1><a href='http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ConfigurationOptions#mod_fastcgi-fastcgi'>http://redmine.lighttpd.net/projects/lighttpd/wiki/Docs:ConfigurationOptions#mod_fastcgi-fastcgi</a></h1>



<h2>Start an FastCGI server for php (needs the php5-cgi package)</h2>

fastcgi.server += ( ".php" => 
    ((
        "socket" => "/var/run/php/php7.3-fpm.sock",
        "broken-scriptfilename" => "enable"
    ))
)
</pre></div>

<p>Now reload the service:</p>

<div class="highlight"><pre lang="">sudo service lighttpd force-reload
</pre></div>

<p></details></p>

<h3>Install dependencies</h3>

<div class="highlight"><pre lang="">sudo apt install -y git php-gd php-zip gphoto2 libimage-exiftool-perl nodejs rsync udisks2
</pre></div>

<p>To install all client dependencies you also have to <a href="https://yarnpkg.com/lang/en/docs/install/#debian-stable">install yarn</a>:</p>

<div class="highlight"><pre lang="">curl -sS <a href='https://dl.yarnpkg.com/debian/pubkey.gpg'>https://dl.yarnpkg.com/debian/pubkey.gpg</a> | sudo apt-key add -
echo "deb <a href='https://dl.yarnpkg.com/debian/'>https://dl.yarnpkg.com/debian/</a> stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
sudo apt update && sudo apt install -y yarn
</pre></div>

<p><strong>Optional:</strong> If you have a new camera, you can also install the latest version of libgphoto2 directly from the maintainer. Choose "Install last stable release":</p>

<div class="highlight"><pre lang="">wget <a href='https://raw.githubusercontent.com/gonzalo/gphoto2-updater/master/gphoto2-updater.sh'>https://raw.githubusercontent.com/gonzalo/gphoto2-updater/master/gphoto2-updater.sh</a>
wget <a href='https://raw.githubusercontent.com/gonzalo/gphoto2-updater/master/.env'>https://raw.githubusercontent.com/gonzalo/gphoto2-updater/master/.env</a>
chmod +x gphoto2-updater.sh
sudo ./gphoto2-updater.sh
</pre></div>

<h3>Install photobooth</h3>

<p>Give our webserver user access to <code>/var/www/</code>:</p>

<div class="highlight"><pre lang="">sudo chown -R www-data:www-data /var/www/
</pre></div>

<p>Get the Photobooth source:</p>

<div class="highlight"><pre lang="">cd /var/www/
sudo -u www-data -s
rm -r html/*
git clone <a href='https://github.com/PhotoboothProject/photobooth'>https://github.com/PhotoboothProject/photobooth</a> html
cd /var/www/html
git submodule update --init
yarn install
yarn build
exit
</pre></div>

<p><strong>Please note:</strong> depending on your hardware <code>yarn install</code> and <code>yarn build</code> takes up to 15min!</p>

<p>Next we have to give our webserver user access to the USB device:</p>

<div class="highlight"><pre lang="">sudo gpasswd -a www-data plugdev
</pre></div>

<p>If you like to use a printer you need to have <code>CUPS</code> installed. On Raspbian <code>CUPS</code> is not installed by default:</p>

<div class="highlight"><pre lang="">sudo apt install -y cups
</pre></div>

<p>Next you also have to add your webserver user to the <code>lp</code> and <code>lpadmin</code> group:</p>

<div class="highlight"><pre lang="">sudo gpasswd -a www-data lp
sudo gpasswd -a www-data lpadmin
</pre></div>

<p>By default the CUPS webinterface can only be accessed via <a href="http://localhost:631"><a href='http://localhost:631'>http://localhost:631</a></a> from your local machine. <br /><br />To remote access CUPS from other clients you need to run the following commands:</p>

<div class="highlight"><pre lang="">sudo cupsctl --remote-any
sudo /etc/init.d/cups restart
</pre></div>

<h3>Install Remote Buzzer support</h3>

<p>Please follow the steps mentioned in the FAQ:<br />* <strong>Q:</strong> <a href="FAQ#can-i-use-hardware-button-on-my-raspberry-pi-to-take-a-picture">Can I use Hardware Button on my Raspberry Pi, to take a Picture?</a></p>

<h3>Try it out</h3>

<p>Now you should restart your Raspberry Pi to apply those settings:</p>

<pre><code>
reboot
</code></pre>

<p>Please use the following to test if your Webserver is able to take pictures:</p>

<div class="highlight"><pre lang="">sudo -u www-data gphoto2 --capture-image
</pre></div>

<p>If it is not working, your operation system probably automatically mounted your camera. You can unmount it, or remove execution permission for gphoto2 Volume Monitor to ensure that the camera is not mounted anymore:</p>

<div class="highlight"><pre lang="">sudo chmod -x /usr/lib/gvfs/gvfs-gphoto2-volume-monitor
</pre></div>

<p>Now reboot or unmount your camera with the following commands (you get a list of mounted cameras with <code>gio mount -l</code>):</p>

<div class="highlight"><pre lang="">gio mount -u gphoto2://YOUR-CAMERA
</pre></div>

<p>Now try again.</p>

<p>If everything is working, open the IP address (you get it via <code>ip addr</code>) of your Raspberry Pi, or if you open it on your machine, type <code>localhost</code> in your browser.</p>
